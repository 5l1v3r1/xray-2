package com.duosecurity.x_ray.device.vulnerability.test.adapter.viewholder;

import android.content.Context;
import android.support.v7.widget.RecyclerView;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

import com.afollestad.materialdialogs.MaterialDialog;

import java.util.List;

import com.duosecurity.x_ray.R;

public class RecyclerItemViewHolder extends RecyclerView.ViewHolder {

  private final TextView textviewTestName;
  private final TextView textviewTestResult;
  private final TextView textviewTestDescription;
  private final Button buttonShowDetails;

  public RecyclerItemViewHolder(final View parent, TextView textviewTestName, TextView textviewTestResult, TextView textviewTestDescription, Button buttonShowDetails) {
    super(parent);

    this.textviewTestName = textviewTestName;
    this.textviewTestResult = textviewTestResult;
    this.textviewTestDescription = textviewTestDescription;
    this.buttonShowDetails = buttonShowDetails;
  }

  public static RecyclerItemViewHolder newInstance(View view) {
    TextView textviewTestName = (TextView) view.findViewById(R.id.vulnerabity_name);
    TextView textviewTestResult = (TextView) view.findViewById(R.id.vulnerabity_result);
    TextView textviewTestDescription = (TextView) view.findViewById(R.id.vulnerabity_description);
    Button buttonShowDetails = (Button) view.findViewById(R.id.vulnerabity_show_details);

    return new RecyclerItemViewHolder(view, textviewTestName, textviewTestResult, textviewTestDescription, buttonShowDetails);
  }

  public void setItemTestName(CharSequence text) {
    textviewTestName.setText(text);
  }

  public void setItemTestResult(CharSequence text) {
    textviewTestResult.setText(text);
  }

  public void setItemTestResultColor(int color) {
    textviewTestResult.setTextColor(color);
  }

  public void setItemTestResultDescription(CharSequence description) {
    textviewTestDescription.setText(description);
  }

  public void setButtonShowDetailsClickListner(final Context context, final String title) {
    buttonShowDetails.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
        new MaterialDialog.Builder(context)
                .title(title)
                .content(R.string.information_not_available)
                .positiveText(R.string.dismiss)
                .show();
      }
    });
  }

  public void setButtonShowDetailsClickListner(final Context context, final String title, final List<String> names, final String description, final String impact, final List<String> moreInfo, final List<String> patches, final Double cvssv2Score, final String cvedate) {
    buttonShowDetails.setOnClickListener(new View.OnClickListener() {
      @Override
      public void onClick(View v) {
        MaterialDialog dialog = new MaterialDialog.Builder(context)
                .title(title)
                .customView(R.layout.dialog_vulnerability_details, true)
                .positiveText(R.string.dismiss)
                .show();

        View view = dialog.getCustomView();
        TextView textViewDescription = (TextView) view.findViewById(R.id.dialog_vulnerabity_description);

        textViewDescription.setText(description);
      }
    });
  }

}
